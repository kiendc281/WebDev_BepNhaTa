<div class="recipe-detail-container" *ngIf="recipe">
  <!-- left panel -->
  <div class="left-panel col-md-9">
    <div class="recipe-header">
      <h1 class="px-3">{{ recipe.recipeName }}</h1>
      <img
        src="../../assets/chi-tiet-cong-thuc/chef-recommend.png"
        alt="chef-recommend"
      />
    </div>

    <img
      [src]="recipe.recipeImage"
      [alt]="recipe.recipeName"
      class="recipe-image"
    />
    <div class="tab-content d-flex flex-row gap-2">
      <button
        class="button-trang"
        [class.active]="isActiveSection('description')"
        (click)="scrollToSection('description')"
      >
        Mô tả
      </button>
      <button
        class="button-trang"
        [class.active]="isActiveSection('ingredients')"
        (click)="scrollToSection('ingredients')"
      >
        Nguyên liệu
      </button>
      <button
        class="button-trang"
        [class.active]="isActiveSection('preparation')"
        (click)="scrollToSection('preparation')"
      >
        Sơ chế
      </button>
      <button
        class="button-trang"
        [class.active]="isActiveSection('steps')"
        (click)="scrollToSection('steps')"
      >
        Thực hiện
      </button>
      <button
        class="button-trang"
        [class.active]="isActiveSection('serving')"
        (click)="scrollToSection('serving')"
      >
        Cách dùng
      </button>
      <button
        class="button-trang"
        [class.active]="isActiveSection('tips')"
        (click)="scrollToSection('tips')"
      >
        Mách nhỏ
      </button>
    </div>

    <div id="description" class="recipe-section">
      <p>{{ recipe.description }}</p>
    </div>
    <div class="recipe-sections">
      <div class="recipe-note" *ngIf="recipe.notes">
        <h3>Lưu ý</h3>
        <p>
          Công thức này cho khẩu phần
          <span class="fw-bold"> {{ selectedServingSize }} người </span>
        </p>
      </div>
      <section id="ingredients" class="recipe-section">
        <div class="section-header">
          <img
            src="../../assets/chi-tiet-cong-thuc/nguyen-lieu.svg"
            alt="Nguyên liệu"
          />
          <h3>Nguyên liệu</h3>
        </div>
        <ul>
          <li *ngFor="let ingredient of getCurrentIngredients()">
            {{ ingredient.name }} - {{ ingredient.quantity }}
          </li>
        </ul>
      </section>

      <section id="preparation" class="recipe-section">
        <div class="section-header">
          <img src="../../assets/chi-tiet-cong-thuc/so-che.svg" alt="Sơ chế" />
          <h3>Sơ chế</h3>
        </div>
        <ul>
          <li *ngFor="let step of recipe.preparation">{{ step }}</li>
        </ul>
      </section>

      <section id="steps" class="recipe-section">
        <div class="section-header">
          <img
            src="../../assets/chi-tiet-cong-thuc/thuc-hien.svg"
            alt="Thực hiện"
          />
          <h3>Thực hiện</h3>
        </div>
        <ul>
          <li *ngFor="let step of recipe.steps">{{ step }}</li>
        </ul>
      </section>

      <section id="serving" class="recipe-section">
        <div class="section-header">
          <img
            src="../../assets/chi-tiet-cong-thuc/cach-dung.svg"
            alt="Cách dùng"
          />
          <h3>Cách dùng</h3>
        </div>
        <p>{{ recipe.servingSuggestion }}</p>
      </section>

      <section id="tips" class="recipe-section">
        <div class="section-header">
          <img
            src="../../assets/chi-tiet-cong-thuc/mach-nho.svg"
            alt="Mách nhỏ"
          />
          <h3>Mách nhỏ</h3>
        </div>
        <p>{{ recipe.tips }}</p>
      </section>
    </div>

    <div class="tags">
      <h4>Tags</h4>
      <div class="tag-list">
        <span *ngFor="let tag of recipe.tags" class="tag">{{ tag }}</span>
      </div>
    </div>

    <div class="related-info">
      <h4>Xem thêm thông tin hữu ích</h4>
      <ul>
        <li *ngFor="let info of recipe.relatedInfo">
          <a [href]="info.link">{{ info.title }}</a>
        </li>
      </ul>
    </div>
  </div>
  <!-- right panel -->
  <div class="col-md-3 right-panel">
    <div class="recipe-meta">
      <div class="meta-item">
        <img
          src="../../assets/chi-tiet-cong-thuc/khau-phan.svg"
          alt="Khẩu phần"
        />
        <div>Khẩu phần:</div>
        <div class="serving-selector">
          <select (change)="onServingSizeChange($event)">
            <option *ngFor="let size of getServingSizes()" [value]="size">
              {{ size }} người
            </option>
          </select>
        </div>
      </div>
      <div class="meta-item">
        <img
          src="../../assets/chi-tiet-cong-thuc/thoi-gian.svg"
          alt="Thời gian"
        />
        <div>Thời gian:</div>
        <span class="info">{{ recipe.time }}</span>
      </div>
      <div class="meta-item">
        <img src="../../assets/chi-tiet-cong-thuc/do-kho.svg" alt="Độ khó" />
        <div>Độ khó:</div>
        <span class="info">{{ recipe.difficulty }}</span>
      </div>
    </div>
    <button class="button-xam mt-3 w-100">
      <img
        class="px-2"
        src="../../assets/chi-tiet-cong-thuc/dark-heart.svg"
        alt=""
      />Lưu công thức
    </button>
    <button class="button-cam mt-3 w-100" routerLink="/san-pham">
      XEM GÓI NGUYÊN LIỆU
    </button>
  </div>
</div>
