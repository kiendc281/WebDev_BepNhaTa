<div class="container">
  <button class="close-button" (click)="onClose()">
    <img src="../../assets/sign in up/zondicons-close-outline.svg" alt="" />
  </button>
  <div class="title">Đăng ký</div>
  <p>
    Tạo tài khoản để lưu ngay công thức yêu thích và nhận những ưu đãi đặc biết!
  </p>

  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <input
        type="text"
        formControlName="name"
        placeholder="Tên của bạn (*)"
        [class.submitted]="submitted && f['name'].errors"
      />
      <div
        class="error-message"
        *ngIf="submitted && f['name'].errors?.['required']"
      >
        (*) Vui lòng nhập tên của bạn
      </div>
    </div>

    <div class="form-group">
      <input
        type="text"
        formControlName="phone"
        placeholder="SĐT của bạn (*)"
        [class.submitted]="submitted && f['phone'].errors"
      />
      <div
        class="error-message"
        *ngIf="submitted && f['phone'].errors?.['required']"
      >
        (*) Vui lòng nhập số điện thoại của bạn
      </div>
      <div
        class="error-message"
        *ngIf="submitted && f['phone'].errors?.['pattern']"
      >
        Số điện thoại không hợp lệ
      </div>
    </div>

    <div class="form-group">
      <input
        type="email"
        formControlName="email"
        placeholder="Email của bạn (*)"
        [class.submitted]="submitted && f['email'].errors"
      />
      <div
        class="error-message"
        *ngIf="submitted && f['email'].errors?.['required']"
      >
        (*) Vui lòng nhập email của bạn
      </div>
      <div
        class="error-message"
        *ngIf="submitted && f['email'].errors?.['email']"
      >
        Email không hợp lệ
      </div>
    </div>

    <div class="form-group password-input">
      <input
        [type]="showPassword ? 'text' : 'password'"
        formControlName="password"
        placeholder="Mật khẩu (*)"
        [class.submitted]="submitted && f['password'].errors"
      />
      <img
        [src]="passwordIcon"
        alt=""
        class="toggle-password"
        (click)="togglePassword()"
      />
      <div
        class="error-message"
        *ngIf="submitted && f['password'].errors?.['required']"
      >
        (*) Vui lòng nhập mật khẩu
      </div>
      <div
        class="error-message"
        *ngIf="submitted && (f['password'].errors?.['minlength'] || f['password'].errors?.['pattern'])"
      >
        Mật khẩu phải có ít nhất 8 ký tự, bao gồm chữ in hoa, số và ký tự đặc
        biệt
      </div>
      <div class="password-note">
        • Tối thiểu 8 ký tự<br />• Bao gồm chữ in hoa, số và ký tự đặc biệt
      </div>
    </div>

    <div class="form-group password-input">
      <input
        [type]="showConfirmPassword ? 'text' : 'password'"
        formControlName="confirmPassword"
        placeholder="Nhập lại mật khẩu (*)"
        [class.submitted]="submitted && (f['confirmPassword'].errors || registerForm.errors?.['mismatch'])"
      />
      <img
        [src]="confirmPasswordIcon"
        alt=""
        class="toggle-password"
        (click)="toggleConfirmPassword()"
      />
      <div
        class="error-message"
        *ngIf="submitted && f['confirmPassword'].errors?.['required']"
      >
        (*) Vui lòng nhập lại mật khẩu
      </div>
      <div
        class="error-message"
        *ngIf="submitted && registerForm.errors?.['mismatch']"
      >
        Mật khẩu xác nhận không khớp
      </div>
    </div>

    <div class="terms">
      <input type="checkbox" formControlName="terms" id="terms" />
      <label for="terms">
        Tôi xác nhận đã đọc và chấp nhận <a href="#">Điều khoản sử dụng</a> và
        <a href="#">Chính sách bảo vệ dữ liệu cá nhân</a> của website.
      </label>
    </div>
    <div
      class="error-message"
      *ngIf="submitted && f['terms'].errors?.['required']"
    >
      (*) Vui lòng đồng ý với điều khoản sử dụng
    </div>

    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <button class="button-cam" type="submit">HOÀN TẤT</button>
  </form>

  <div class="login-link">
    <p>
      Đã có tài khoản?
      <a (click)="navigateToLogin()" style="cursor: pointer">Đăng nhập ngay!</a>
    </p>
  </div>
</div>
